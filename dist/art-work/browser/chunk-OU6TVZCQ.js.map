{
  "version": 3,
  "sources": ["libs/feature-auth/src/lib/login/login.schema.ts", "libs/feature-auth/src/lib/login/login.component.ts"],
  "sourcesContent": ["import { z } from 'zod';\n\nexport const loginSchema = z.object({\n  email: z.string().min(1, 'Email is required').email('Enter a valid email address'),\n  password: z.string().min(1, 'Password is required'),\n});\n\nexport type LoginModel = z.infer<typeof loginSchema>;\n", "import { Component, inject, signal } from '@angular/core';\nimport { Router, RouterLink } from '@angular/router';\nimport { form, FormField, submit, validateStandardSchema } from '@angular/forms/signals';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { AuthStore } from '@art-work/core';\nimport { loginSchema, LoginModel } from './login.schema';\n\n@Component({\n  selector: 'lib-login',\n  standalone: true,\n  imports: [\n    FormField,\n    RouterLink,\n    MatCardModule,\n    MatFormFieldModule,\n    MatInputModule,\n    MatButtonModule,\n    MatIconModule,\n    MatProgressSpinnerModule,\n  ],\n  template: `\n    <div class=\"auth-page\">\n      <mat-card class=\"auth-card\">\n        <mat-card-header>\n          <mat-card-title>Sign In</mat-card-title>\n          <mat-card-subtitle>Welcome back</mat-card-subtitle>\n        </mat-card-header>\n\n        <mat-card-content>\n          @if (errorMessage()) {\n            <mat-error class=\"banner-error\">{{ errorMessage() }}</mat-error>\n          }\n\n          <form class=\"auth-form\" (submit)=\"onSubmit($event)\">\n            <mat-form-field appearance=\"outline\">\n              <mat-label>Email</mat-label>\n              <input\n                matInput\n                type=\"email\"\n                [formField]=\"loginForm.email\"\n                autocomplete=\"email\"\n              />\n              <mat-icon matSuffix>email</mat-icon>\n              @if (loginForm.email().touched() && loginForm.email().invalid()) {\n                <mat-error>{{ loginForm.email().errors()[0]?.message }}</mat-error>\n              }\n            </mat-form-field>\n\n            <mat-form-field appearance=\"outline\">\n              <mat-label>Password</mat-label>\n              <input\n                matInput\n                [type]=\"hidePassword() ? 'password' : 'text'\"\n                [formField]=\"loginForm.password\"\n                autocomplete=\"current-password\"\n              />\n              <button\n                mat-icon-button\n                matSuffix\n                type=\"button\"\n                (click)=\"hidePassword.set(!hidePassword())\"\n                [attr.aria-label]=\"hidePassword() ? 'Show password' : 'Hide password'\"\n              >\n                <mat-icon>{{ hidePassword() ? 'visibility_off' : 'visibility' }}</mat-icon>\n              </button>\n              @if (loginForm.password().touched() && loginForm.password().invalid()) {\n                <mat-error>{{ loginForm.password().errors()[0]?.message }}</mat-error>\n              }\n            </mat-form-field>\n\n            <div class=\"auth-actions\">\n              <button\n                mat-flat-button\n                type=\"submit\"\n                [disabled]=\"isSubmitting()\"\n              >\n                @if (isSubmitting()) {\n                  <mat-spinner diameter=\"20\" />\n                } @else {\n                  Sign In\n                }\n              </button>\n            </div>\n          </form>\n        </mat-card-content>\n\n        <mat-card-actions align=\"end\">\n          <a mat-button routerLink=\"/auth/forgot-password\">Forgot password?</a>\n          <a mat-button routerLink=\"/auth/register\">Create account</a>\n        </mat-card-actions>\n      </mat-card>\n    </div>\n  `,\n  styles: `\n    .banner-error {\n      display: block;\n      margin-bottom: 12px;\n      font-size: 14px;\n    }\n  `,\n})\nexport class LoginComponent {\n  private readonly authStore = inject(AuthStore);\n  private readonly router = inject(Router);\n\n  readonly isSubmitting = signal(false);\n  readonly errorMessage = signal('');\n  readonly hidePassword = signal(true);\n\n  readonly loginModel = signal<LoginModel>({ email: '', password: '' });\n\n  readonly loginForm = form(this.loginModel, (s) => {\n    validateStandardSchema(s, loginSchema);\n  });\n\n  onSubmit(event: Event): void {\n    event.preventDefault();\n    this.errorMessage.set('');\n\n    submit(this.loginForm, async () => {\n      this.isSubmitting.set(true);\n      try {\n        const { email, password } = this.loginModel();\n        await this.authStore.login(email, password);\n        await this.router.navigate(['/dashboard']);\n      } catch (err: unknown) {\n        this.errorMessage.set(this.getErrorMessage(err));\n      } finally {\n        this.isSubmitting.set(false);\n      }\n    });\n  }\n\n  private getErrorMessage(err: unknown): string {\n    if (err && typeof err === 'object' && 'code' in err) {\n      const code = (err as { code: string }).code;\n      if (code === 'auth/invalid-credential') return 'Invalid email or password.';\n      if (code === 'auth/too-many-requests') return 'Too many attempts. Please try again later.';\n    }\n    return 'An unexpected error occurred. Please try again.';\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
